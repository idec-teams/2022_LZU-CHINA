## Molecular Biology
We obtain information on lldPRD operon, pCaCd, pPepT, YebF, HlyE, Bxb1, TP901, Amplifying genetic switches, CCL21, CDD-iRGD, φX174 E, INP and HlpA from NCBI, iGEM and BioCyc databases, and amplify using colony PCR from E. coli DH5α, or synthesize (Genewiz, China). mRFPs were deposited and provided by our laboratory. We purchase E. coli Nissle 1917 (EcN) from Biobw (China, Beijing). E. coli DH5α were deposited from laboratory. All plasmids base on the pSB1A3/pSB3T5/pSB4C5 plasmid backbone. pSB1A3 is ampicillin resistant and carries the highcopy replicon ColE1; pSB3T5 is tetracycline resistant and carries the medium copy replicon p15A; pSB4C5 is chloramphenicol resistant and carries the low copy replicon pSC101. All Biobrick parts will be registered in the iGEM Standard Bioparts Registry (partsregistry.org). All amplification primers were synthesized by Tsingke (China, Beijing).

We use a one-step cloning kit (C113, Vazyme, China) to assemble recombinant plasmids (constructions), including Reporter 01-03; Controller 01-06; Switch 01-06; Effector 01-03 (full HlpAmstrain information is provided in Supplementary Materials). Both Reporter and Controller use pSB1A3 as the plasmid backbone. Switch uses pSB4C5 as the plasmid backbone and Effector uses pSB3T5 as the plasmid backbone. All recombinant plasmids were first transformed into E. coli DH5α for amplification and proofed by DNA sequencing (GENERAL Biol,Chuzhou, China), then transformed into EcN.

Reporter consists of an operational unit that senses hypoxia/pH/L-lactate and an mRFP, which purpose was to verify the in vitro response of pPepT/pCaCd/lldPRD operon by fluorescent protein mRFP. Controller introduce the genes TP901 and Bxb1 encoding serine integrase to the downstream of pPepT/pCaCd/lldPRD operon to control the Amplifying genetic switches. Switch 01- 02 were composed of Amplifying genetic switches (TP901 or Bxb1 switches) and fluorescent protein mRFP; Switch 03-04 were composed of Amplifying genetic switches and lysis gene φ X174 E; Switch 05-06 were composed of Amplifying genetic switches and YebF -HlyE composition. Finally, Effector controls the expression of therapeutic proteins HlyE, CCL21 or CDD-iRGD by the constitutive promoter J23100.

We transform Controller and Switch 01/02 into EcN (Amplifying reporter, AR 01-06) to check the signal amplification effect of the Amplifying genetic logic gate, and compare with the Reporter to determine the best induction-response system. We transform the Controller and Switch 05/06 verified in the previous step into EcN (Amplifying Effector, AE) to endow it with the ability to eliminate colorectal cancer. Finally, we construct LE strain (Lysis Effector), which consisted of Controller 05/06, Switch 03/04 and Effector 01-03. To check the lysis ability of φX174 E, we replace the Effector (Lysis reporter, LR) by pSB3T5 (Reporter variant, RV) constitutively expressing mRFP. Since Controller, Switch and Effector possess different replicons and resistances, that ensure the plasmid compatibility.

## Characterization and Analysis of Reporting Strains in Vitro

We culture each strain in M9 basic medium with relevant antibiotics (supplemented with 0.4% glucose) overnight (37℃, 150 rpm), followed for the further experiment next morning. For lactic acid reporters (Reporter 01; AR 01/02; LR), the culture of each lactic acid reporter variant strain was transferred to a 24 well plates (6 repeats), with M9 broth diluted to 1 mL per well. The next step, the final concentration of L-lactic acid should reach 0, 0.1, 1,5 and 10 mM, by adding 25μL M9 broth containing different concentrations of L-lactic acid (Sigma-Aldrich). For pH reporter (Reporter 02, AR 03/04, LR), each variety strain needs to be cultured in the 96 well plates, and the pH value of M9 medium should be 5.5, 5.8, 6.3 and 7.3, respectively. For hypoxia reporters (Reporter 03, AR 05/06, LR), we culture each variant strain overnight under normoxic and hypoxic conditions at 37℃. To achieve hypoxia, reporters were incubated statically in an anaerobic pocket(Hopebiol, Qingdao, China) with oxygen indicators. We select untransformed EcN and EcN containing p23114-mRFP which grows under the same conditions as negative control and positive control respectively.

The initial OD600 value of all strains is 0.1. After 16-20 hours’ incubation, we detect OD600 and mRFP fluorescence through microplate reader (Thermo Fisher Scientific, USA) (excitation λ: 584nm/10 nm, emission λ: 607/10nm). The fluorescence of all reporters in vitro is calculated by dividing the crude mRFP pixel intensity by OD600, and both signals we obtain from the data of microplate reader. In addition, the background fluorescence signal need to be deducted (no plasmid EcN control). For hypoxia reporters, the fluorescence signal was normalized through the control of constitutive promoter (p23114) to explain the protein folding maturation under hypoxia.

The fold change of each reporter was quantified as the ratio of normalized fluorescence signal under induced and non-induced conditions. We average over all three duplicate values. The baseline conditions are 20% oxygen concentration, 0 mM lactic acid concentration, pH $7.3^{25}$.

## Cell culture

We purchase CT-26 (murine colon cancer cells), RKO (human colon cancer cells) and SW480 (human colon cancer cells bacteria) cells from Procell (Wuhan, China). Cells were all cultured in 25 cm2 culture flasks (Corning, USA) at 37 °C with 5% CO2. The basic culture medium is DMEM (BasalMedia , Shanghai, China), supplemented with 10% (v/v) fetal bovine serum (Gemini, USA) and 1% P/ S (Gibco, USA).

## Utility test for cell culture samples

With an initial cell count of 105, cell lines Were all seeded in 25cm2 culture flask (11 repeats) containing 5ml DMEM/10% fetal bovine serum. For the next 5 days, we take out the entire contents
of each bottle (two bottle of samples taken at the last time) and transfer to the 15ml sterile centrifuge tube every 8-12 hours. Centrifuge the samples for 5 minutes in 200 r.c.f., collect the supernatant from the culture medium to another centrifuge tube, freezing at -80°C. Subsequently, we inoculate 6 reporter strains (3 of selected pH, lactic acid and hypoxia reporter, cleavage reporter LR 01-03), negative control and positive control in a 24 well plates with 800 μL M9 medium (0.4% glucose) per well. The cell supernatant preserved at 200 μL was co-incubated with the above strains (the volume ratio of cell supernatant to M9 medium was 1:4). In the culture room connected to the CO2-O2 controller, hypoxia biosensors were tested with different levels of oxygen. All strains were cultured for 12 to 16 hours, and we measure the pixel intensity and absorbance of the reporters through microplate reader (Thermo Fisher Scientific, USA). The content of lactic acid and pH in the cell supernatant was calculated through the standard curve of the reporter $strains^{25}$.

## Co-Culture of AE and LE Strains and Colorectal Cancer Cells in Vitro

RKO cells were inoculated in 96 well plates (42 repeats) which containing 100 μl DMEM/10% fetal bovine serum cultured fluid (without phenol red). When RKO cells adherent grow, inoculating 10 μl
of AR and LR strains (6 strains in total, 3 repeats, initial OD600 = 0.6) characterize the expression of lysis genes and bacterial growth density during co-culture of engineered AE strains with RKO cells. A CO2 incubator is used to adjust oxygen levels. Fluorescence intensity changes of the reporter were measured by a microplate reader (Thermo Fisher Scientific, USA) (every 20 min). We inoculate 10 μl of AE strains (Activators+ Effector 01, 3 strains in total, 3 repeats), control 1 (Effector 01, 1 strain, 3 repeats), control 2 (Activators, 3 strains, 3 repeats) and negative control (EcN, 1 strain, 3 repeats). Using the CCK8 kit (C0037, Beyotime, China) monitor cell viability changes (every 20 min)29. To investigate the effect of LE strain lysates on tumor cells, LE strains and their controls (lysis+/-, activators +/-) were induced overnight using cell supernatants on day 5 as described in method 4. Centrifugation at 10,000 rpm to collect the bacterial medium supernatant and preserved at -80°C. Subsequently, the cell lines were inoculated in 24 well plates containing 100 μl DMEM/10% fetal bovine serum cultured fluid (24 repeats). After the cells adhered to the wells, we add 10 μl of bacterial medium supernatant to the cell culture medium. Using the CCK8 kit detect cell viability after 1h incubation with bacterial $lysates^{26}$.

## Bacterial adhesion analysis

We add cell slides in 6 cm Petri dishes (Corning, USA), and cultivate CT26/RKO/SW480 cells 2 days in advance. Bacteria expressing INP-HlpA were activated with 5 mL test tubes a day in advance. Through centrifugation collect 5 mL of bacteria and resuspend with 2 mL of PBS. The PBS suspension was submerged in a 6 cm cell culture dish containing cell slides. After 1 h incubation at 37°C, discard the suspension and wash 3 times with PBS. Add 1 ml of DAPI working fluid (KeyGEN biotech, Jiangsu, China) to the culture dish, light avoidance incubation for 10 min, wash once with PBS, add buffer A dropwise on the microscope slide, and flip the cell slide onto the microscope slide. we observe the cell slides by using a fluorescence microscope Axio Imager. Z2 (ZEISS, Germany) with an excitation wavelength of 561 nm (corresponding to microscope AF546 wavelength), and the images were processed using imageJ 2.1.4.7.28. To quantify the amount of adherent bacteria, we dilute 10-7 for the washed down PBS suspension and apply it to LB plates for CFU counting27.